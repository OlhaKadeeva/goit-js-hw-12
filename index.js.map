{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function fetchImages(query, page) {\n  const options = {\n    params: {\n      key: '48865125-4f8597dc0399716036b78fee9',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n      page,\n    },\n  };\n  const res = await axios.get('https://pixabay.com/api/', options);\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loaderBox = document.querySelector('.loader-box');\n\nexport function renderImages(images, page) {\n  const galleryHtml = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <figure class=\"thumb-container\">\n                  <img\n                    class=\"thumb-image\"\n                    src=\"${webformatURL}\"\n                    data-source=\"${largeImageURL}\"\n                    alt=\"${tags}\"\n                  />\n  \n                  <figcaption class=\"thumb-data\">\n                    <dl class=\"thumb-data-list\">\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Likes</dt>\n                        <dd class=\"thumb-data-data\">${likes}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Views</dt>\n                        <dd class=\"thumb-data-data\">${views}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Comments</dt>\n                        <dd class=\"thumb-data-data\">${comments}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Downloads</dt>\n                        <dd class=\"thumb-data-data\">${downloads}</dd>\n                      </div>\n                    </dl>\n                  </figcaption>\n                </figure>\n              </a>\n            </li>\n          `\n    )\n    .join('');\n  if (page === 1) {\n    gallery.innerHTML = galleryHtml;\n  } else {\n    gallery.insertAdjacentHTML('beforeend', galleryHtml);\n  }\n  lightbox.refresh();\n  hideLoader();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showLoader() {\n  loaderBox.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  gallery.classList.remove('hidden');\n  loaderBox.classList.add('hidden');\n}\n\nexport function showMessage() {\n  iziToast.show({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    close: `true`,\n    title: 'Error',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\nexport function showMessageErr() {\n  iziToast.show({\n    position: 'topRight',\n    message: 'Something went wrong...',\n    close: `true`,\n    title: 'Error',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\nexport function showMessageTheEnd() {\n  iziToast.show({\n    position: 'bottomRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    close: `true`,\n    title: 'Info',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\n\n//при натисканні на кнопку лоад мор плавний скрол\nexport function scrollPage() {\n  const info = gallery.lastElementChild.getBoundingClientRect();\n  const height = info.height; //звертаємось до властивості висота в об'єкті\n  window.scrollBy({\n    behavior: 'smooth', //плавність прокручування\n    top: height * 3,\n  });\n}\n","import fetchImages from './js/pixabay-api';\nimport {\n  hideLoader,\n  renderImages,\n  showLoader,\n  showMessage,\n  showMessageErr,\n  showMessageTheEnd,\n  scrollPage,\n} from './js/render-functions';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('#search-text');\nconst buttonLoadMore = document.querySelector('.button');\n\nconst params = {\n  query: '',\n  page: 1,\n  per_page: 40,\n  total: 100,\n};\n\nasync function handleSearchResults(images, page, total) {\n  let maxPage = Math.ceil(total / params.per_page); // дізнаємось максимальну сторінку і округляємо\n  if (images.length === 0) {\n    checkBtnStatus(maxPage);\n    showMessage();\n    return; //\n  } else {\n    renderImages(images, page);\n    checkBtnStatus(maxPage);\n    if (page === maxPage) {\n      showMessageTheEnd();\n    } else {\n      if (params.page >= maxPage) {\n        showMessageTheEnd();\n      }\n    }\n  }\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  // querry parameters\n  params.page = 1;\n  params.query = input.value.trim(); //запит користувача(що ввів користувач)\n\n  if (!params.query) return;\n  input.value = '';\n  // Loader start\n  showLoader();\n  //  Qerry\n  try {\n    const data = await fetchImages(params.query, params.page, params.per_page); //чекаємо результат запиту\n    await handleSearchResults(data.hits, params.page, data.total); //передаємо отримані зображення\n  } catch (err) {\n    console.error('Помилка запиту:', err);\n    showMessageErr();\n  } finally {\n    // input.value = '';//очистити\n    params.total = data.total;\n    hideLoader(); //ховаємо лоадер в будь-якому випадку\n  }\n});\n\n// Load more button\nbuttonLoadMore.addEventListener('click', async () => {\n  showLoader();\n  params.page++;\n  // Querry\n  const data = await fetchImages(params.query, params.page, params.per_page); //запит зі збільшеною сторінкою\n  await handleSearchResults(data.hits, params.page, data.total);\n  hideLoader();\n  scrollPage(); //проскролювання\n});\n\nfunction showLoadMoreBtn() {\n  buttonLoadMore.classList.remove('hidden'); //видалити\n}\nfunction hideLoadMoreBtn() {\n  buttonLoadMore.classList.add('hidden'); //сховати\n}\n\n//функція, яка перевіряє показати кнопку 'Load more' чи сховати.\nfunction checkBtnStatus(lastPage) {\n  if (params.page >= lastPage) {\n    hideLoadMoreBtn(); //кнопку сховати\n  } else {\n    showLoadMoreBtn(); //кнопку показати\n  }\n}\n"],"names":["fetchImages","query","page","options","axios","gallery","loaderBox","renderImages","images","galleryHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","hideLoader","SimpleLightbox","showLoader","showMessage","iziToast","showMessageErr","showMessageTheEnd","scrollPage","height","form","input","buttonLoadMore","params","handleSearchResults","total","maxPage","checkBtnStatus","e","data","err","showLoadMoreBtn","hideLoadMoreBtn","lastPage"],"mappings":"+vBAEe,eAAeA,EAAYC,EAAOC,EAAM,CACrD,MAAMC,EAAU,CACd,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,EAEE,OADY,MAAME,EAAM,IAAI,2BAA4BD,CAAO,GACpD,IACb,CCXA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,aAAa,EAE/C,SAASC,EAAaC,EAAQN,EAAM,CACzC,MAAMO,EAAcD,EACjB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,8CAEkCL,CAAa;AAAA;AAAA;AAAA;AAAA,2BAIhCD,CAAY;AAAA,mCACJC,CAAa;AAAA,2BACrBC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDAOuBC,CAAK;AAAA;AAAA;AAAA;AAAA,sDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sDAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAQ1D,EACA,KAAK,EAAE,EACNd,IAAS,EACXG,EAAQ,UAAYI,EAEpBJ,EAAQ,mBAAmB,YAAaI,CAAW,EAErDQ,EAAS,QAAO,EAChBC,GACF,CAEA,MAAMD,EAAW,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,GAAa,CAC3Bd,EAAU,UAAU,OAAO,QAAQ,CACrC,CAEO,SAASY,GAAa,CAC3Bb,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAU,UAAU,IAAI,QAAQ,CAClC,CAEO,SAASe,GAAc,CAC5BC,EAAS,KAAK,CACZ,SAAU,WACV,QACE,2EACF,MAAO,OACP,MAAO,QACP,YAAa,OACb,kBAAmB,OACnB,aAAc,QACd,SAAU,QACV,gBAAiB,SACrB,CAAG,CACH,CACO,SAASC,GAAiB,CAC/BD,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,0BACT,MAAO,OACP,MAAO,QACP,YAAa,OACb,kBAAmB,OACnB,aAAc,QACd,SAAU,QACV,gBAAiB,SACrB,CAAG,CACH,CACO,SAASE,GAAoB,CAClCF,EAAS,KAAK,CACZ,SAAU,cACV,QAAS,6DACT,MAAO,OACP,MAAO,OACP,YAAa,OACb,kBAAmB,OACnB,aAAc,QACd,SAAU,QACV,gBAAiB,SACrB,CAAG,CACH,CAGO,SAASG,GAAa,CAE3B,MAAMC,EADOrB,EAAQ,iBAAiB,sBAAqB,EACvC,OACpB,OAAO,SAAS,CACd,SAAU,SACV,IAAKqB,EAAS,CAClB,CAAG,CACH,CCrHA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAiB,SAAS,cAAc,SAAS,EAEjDC,EAAS,CACb,MAAO,GACP,KAAM,EACN,SAAU,GACV,MAAO,GACT,EAEA,eAAeC,EAAoBvB,EAAQN,EAAM8B,EAAO,CACtD,IAAIC,EAAU,KAAK,KAAKD,EAAQF,EAAO,QAAQ,EAC/C,GAAItB,EAAO,SAAW,EAAG,CACvB0B,EAAeD,CAAO,EACtBZ,IACA,MACJ,MACId,EAAaC,EAAQN,CAAI,EACzBgC,EAAeD,CAAO,GAClB/B,IAAS+B,GAGPH,EAAO,MAAQG,IACjBT,GAIR,CAEAG,EAAK,iBAAiB,SAAU,MAAMQ,GAAK,CAMzC,GALAA,EAAE,eAAc,EAEhBL,EAAO,KAAO,EACdA,EAAO,MAAQF,EAAM,MAAM,KAAI,EAE3B,EAACE,EAAO,MACZ,CAAAF,EAAM,MAAQ,GAEdR,IAEA,GAAI,CACF,MAAMgB,EAAO,MAAMpC,EAAY8B,EAAO,MAAOA,EAAO,KAAMA,EAAO,QAAQ,EACzE,MAAMC,EAAoBK,EAAK,KAAMN,EAAO,KAAMM,EAAK,KAAK,CAC7D,OAAQC,EAAK,CACZ,QAAQ,MAAM,kBAAmBA,CAAG,EACpCd,GACJ,QAAY,CAERO,EAAO,MAAQ,KAAK,MACpBZ,GACD,EACH,CAAC,EAGDW,EAAe,iBAAiB,QAAS,SAAY,CACnDT,IACAU,EAAO,OAEP,MAAMM,EAAO,MAAMpC,EAAY8B,EAAO,MAAOA,EAAO,IAAqB,EACzE,MAAMC,EAAoBK,EAAK,KAAMN,EAAO,KAAMM,EAAK,KAAK,EAC5DlB,IACAO,GACF,CAAC,EAED,SAASa,GAAkB,CACzBT,EAAe,UAAU,OAAO,QAAQ,CAC1C,CACA,SAASU,GAAkB,CACzBV,EAAe,UAAU,IAAI,QAAQ,CACvC,CAGA,SAASK,EAAeM,EAAU,CAC5BV,EAAO,MAAQU,EACjBD,IAEAD,GAEJ"}