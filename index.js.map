{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default function fetchImages(searchText) {\n  const options = {\n    params: {\n      key: '48865125-4f8597dc0399716036b78fee9',\n      q: searchText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n  return axios.get('https://pixabay.com/api/', options);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loaderBox = document.querySelector('.loader-box');\n\nexport function renderImages(images) {\n  const galleryHtml = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <figure class=\"thumb-container\">\n                  <img\n                    class=\"thumb-image\"\n                    src=\"${webformatURL}\"\n                    data-source=\"${largeImageURL}\"\n                    alt=\"${tags}\"\n                  />\n  \n                  <figcaption class=\"thumb-data\">\n                    <dl class=\"thumb-data-list\">\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Likes</dt>\n                        <dd class=\"thumb-data-data\">${likes}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Views</dt>\n                        <dd class=\"thumb-data-data\">${views}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Comments</dt>\n                        <dd class=\"thumb-data-data\">${comments}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Downloads</dt>\n                        <dd class=\"thumb-data-data\">${downloads}</dd>\n                      </div>\n                    </dl>\n                  </figcaption>\n                </figure>\n              </a>\n            </li>\n          `\n    )\n    .join('');\n\n  gallery.innerHTML = galleryHtml;\n  lightbox.refresh();\n  hideLoader();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showLoader() {\n  gallery.classList.add('hidden');\n  loaderBox.classList.remove('hidden');\n  loaderBox.innerHTML = '\"Wait, the image is loaded...\"';\n}\n\nexport function hideLoader() {\n  gallery.classList.remove('hidden');\n  loaderBox.classList.add('hidden');\n}\n\nexport function showMessage() {\n  iziToast.show({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    close: `true`,\n    title: 'Error',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\nexport function showMessageErr() {\n  iziToast.show({\n    position: 'topRight',\n    message: 'Something went wrong...',\n    close: `true`,\n    title: 'Error',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\n","import fetchImages from './js/pixabay-api';\nimport {\n  hideLoader,\n  renderImages,\n  showLoader,\n  showMessage,\n  showMessageErr,\n} from './js/render-functions';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('#search-text');\nconst btnLoadMore = document.querySelector('.btn-load');\nconst loadElem = document.querySelector('.js-loader');\nconst gallery = document.querySelector('.gallery');\n\nlet query;\nlet page;\nlet total;\nlet per_page = 20;\n\nform.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  const searchText = input.value.trim();\n  if (!searchText) return;\n  input.value = '';\n  showLoader();\n\n  let page = 1;\n  let query = e.target.elements.query.value;\n\n  try {\n    const result = await fetchArticles(query, page, total, per_page);\n\n    fetchImages(searchText);\n\n    const data = handleSearchResults(result, data.data.hits);\n    total = result.totalResults;\n  } catch {\n    hideLoader();\n    showMessageErr();\n    console.log(err);\n  }\n\n  function handleSearchResults(images) {\n    if (images.length == 0) {\n      showMessage();\n    }\n    renderImages(images);\n  }\n  checkBtnStatus();\n  hideSpinner();\n}\nbtnLoadMore.addEventListener('click', async () => {\n  page += 1;\n  showSpinner();\n  checkBtnStatus();\n  const result = await fetchArticles(query, page, total, per_page);\n  const markup = articlesTemplate(result.images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  hideSpinner();\n\n  scrollPage();\n});\n\nfunction showLoadMoreBtn() {\n  btnLoadMore.disabled = false;\n}\n\nfunction hideLoadMoreBtn() {\n  btnLoadMore.disabled = true;\n}\n\nfunction checkBtnStatus(page, total, per_page) {\n  const perPage = 20;\n  const maxPage = Math.ceil(total / perPage);\n\n  if (page >= maxPage) {\n    hideLoadMoreBtn();\n    iziToast.info('This is last page');\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction showSpinner() {\n  loadElem.classList.remove('hidden');\n}\n\nfunction hideSpinner() {\n  loadElem.classList.add('hidden');\n}\n\nfunction scrollPage() {\n  const info = gallery.firstElementChild.getBoundingClientRect();\n  const height = info.height;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\n"],"names":["fetchImages","searchText","options","axios","gallery","loaderBox","renderImages","images","galleryHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","hideLoader","SimpleLightbox","showLoader","showMessage","iziToast","showMessageErr","form","input","btnLoadMore","loadElem","query","page","total","per_page","handleSubmit","e","result","data","handleSearchResults","checkBtnStatus","hideSpinner","showSpinner","markup","scrollPage","showLoadMoreBtn","hideLoadMoreBtn","maxPage","height"],"mappings":"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"}