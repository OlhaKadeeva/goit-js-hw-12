{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function fetchImages(query, page, per_page) {\n  const options = {\n    params: {\n      key: '48865125-4f8597dc0399716036b78fee9',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: per_page,\n      page: page,\n    },\n  };\n  const res = await axios.get('https://pixabay.com/api/', options);\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loaderBox = document.querySelector('.loader-box');\n\nexport function renderImages(images, page) {\n  const galleryHtml = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <figure class=\"thumb-container\">\n                  <img\n                    class=\"thumb-image\"\n                    src=\"${webformatURL}\"\n                    data-source=\"${largeImageURL}\"\n                    alt=\"${tags}\"\n                  />\n  \n                  <figcaption class=\"thumb-data\">\n                    <dl class=\"thumb-data-list\">\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Likes</dt>\n                        <dd class=\"thumb-data-data\">${likes}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Views</dt>\n                        <dd class=\"thumb-data-data\">${views}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Comments</dt>\n                        <dd class=\"thumb-data-data\">${comments}</dd>\n                      </div>\n                      <div class=\"thumb-data-item\">\n                        <dt class=\"thumb-data-title\">Downloads</dt>\n                        <dd class=\"thumb-data-data\">${downloads}</dd>\n                      </div>\n                    </dl>\n                  </figcaption>\n                </figure>\n              </a>\n            </li>\n          `\n    )\n    .join('');\n  if (page === 1) {\n    gallery.innerHTML = galleryHtml;\n  } else {\n    gallery.insertAdjacentHTML('beforeend', galleryHtml);\n  }\n  lightbox.refresh();\n  hideLoader();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showLoader() {\n  // gallery.classList.add('hidden');\n  loaderBox.classList.remove('hidden');\n  // loaderBox.innerHTML = '\"Wait, the image is loaded...\"';\n}\n\nexport function hideLoader() {\n  gallery.classList.remove('hidden');\n  loaderBox.classList.add('hidden');\n}\n\nexport function showMessage() {\n  iziToast.show({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    close: `true`,\n    title: 'Error',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\nexport function showMessageErr() {\n  iziToast.show({\n    position: 'topRight',\n    message: 'Something went wrong...',\n    close: `true`,\n    title: 'Error',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\nexport function showMessageTheEnd() {\n  iziToast.show({\n    position: 'bottomRight',\n    message: 'We are sorry, but you have reached the end of search results.',\n    close: `true`,\n    title: 'Info',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\n\n//при натисканні на кнопку лоад мор плавний скрол\nexport function scrollPage() {\n  const info = gallery.lastElementChild.getBoundingClientRect();\n  const height = info.height; //звертаємось до властивості висота в об'єкті\n  // console.log(height);\n  scrollBy({\n    behavior: 'smooth', //плавність прокручування\n    top: height * 3,\n  });\n}\n","import iziToast from 'izitoast';\nimport fetchImages from './js/pixabay-api';\nimport {\n  hideLoader,\n  renderImages,\n  showLoader,\n  showMessage,\n  showMessageErr,\n  showMessageTheEnd,\n  scrollPage,\n} from './js/render-functions';\n\nconst form = document.querySelector('form');\n// const gallery = document.querySelector('.gallery');\nconst input = document.querySelector('#search-text');\nconst buttonLoadMore = document.querySelector('.button');\nconst loadElem = document.querySelector('.js-loader');\n// const targetElem = document.querySelector('.js-target');\n\nconst params = {\n  query: '',\n  page: 1,\n  per_page: 40,\n  total: 100,\n};\n\nasync function handleSearchResults(images, page) {\n  if (images.length === 0) {\n    if (page === 1) {\n      showMessage();\n    } else {\n      checkBtnStatus();\n    }\n  } else {\n    renderImages(images, page);\n    checkBtnStatus();\n  }\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  showSpinner();\n  params.page = 1;\n  params.query = input.value.trim(); //запит користувача(що ввів користувач)\n\n  if (!params.query) return;\n  input.value = '';\n  showLoader();\n\n  try {\n    const data = await fetchImages(params.query, params.page, params.per_page); //чекаємо результат запиту\n    await handleSearchResults(data.hits, params.page); //передаємо отримані зображення\n    params.total = data.total;\n  } catch (err) {\n    console.error('Помилка запиту:', err);\n    showMessageErr();\n  } finally {\n    hideLoader(); //ховаємо лоадер в будь-якому випадку\n    hideSpinner();\n  }\n});\n\n// Load more button\n\nbuttonLoadMore.addEventListener('click', async () => {\n  params.page += 1;\n  showSpinner();\n  showLoader();\n  const data = await fetchImages(params.query, params.page, params.per_page); //запит зі збільшеною сторінкою\n  await handleSearchResults(data.hits, params.page);\n  hideSpinner();\n  // updateObserver();\n  scrollPage(); //проскролювання\n});\n\nfunction showLoadMoreBtn() {\n  buttonLoadMore.classList.remove('hidden'); //видалити\n}\nfunction hideLoadMoreBtn() {\n  buttonLoadMore.classList.add('hidden'); //сховати\n}\n\n//функція, яка перевіряє показати кнопку 'Load more' чи сховати.\nfunction checkBtnStatus() {\n  const maxPage = Math.ceil(params.total / params.per_page); //дізнаємось максимальну сторінку і округляємо\n  if (params.page >= maxPage) {\n    hideLoadMoreBtn(); //кнопку сховати\n    showMessageTheEnd();\n  } else {\n    showLoadMoreBtn(); //кнопку показати\n  }\n}\n\n//Spinner\nfunction showSpinner() {\n  loadElem.classList.remove('hidden'); //видалити\n}\nfunction hideSpinner() {\n  loadElem.classList.add('hidden'); //сховати\n}\n"],"names":["fetchImages","query","page","per_page","options","axios","gallery","loaderBox","renderImages","images","galleryHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","hideLoader","SimpleLightbox","showLoader","showMessage","iziToast","showMessageErr","showMessageTheEnd","scrollPage","height","form","input","buttonLoadMore","loadElem","params","handleSearchResults","checkBtnStatus","e","showSpinner","data","err","hideSpinner","showLoadMoreBtn","hideLoadMoreBtn","maxPage"],"mappings":"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"}